<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <title>Document</title>
</head>
<body>
    
<div id="app">
    <h1>Welcome to Weather App</h1>
      <form>
        <input v-model="city" class='searchbar transparent' id='search' type='text' @click="GetWeath" placeholder=' enter city to search weather' />
  
        <input id='button' @click="GetWeath" type="button" value='Search' />
      </form>

      The weather is {{weather}}

      <span v-if="history.length>0">
        <hr>
        <h1>History of Numbers generated</h1>
        <ul>
        <li v-for="weather in history">{{weather}}</li>
        </ul>
    </span>
    </div>

        <script>
            var app = new Vue({
            el:'#app',
            data: {
                city: '',
                weather: null,
                history :[]},
            methods:{
                GetWeath : getWeather
              }
            })
            //function that gets json data from the server
            function getWeather(){
              console.log("getWeather called");
              let prom = fetch("weather/"+this.city);
              prom
                .then( response => response.json())
                .then (response => {
                   this.weather = response.list[0].weather;
                   this.history.push(response.list);
                   console.log( response.list);

                   //the next 4 days
                   let d0 = response.list[0];
                   let d1 = response.list[1];
                   let d2 = response.list[2];
                   let d3 = response.list[3];

                  
                   //day 0 - today data
                  let d0Temp = d0.temp.day;
                  let d0Wind = d0.speed ; //not 100% confident on this come back
                  let d0Rain = d0.rain;

                  console.log("day0:" + d0Temp + " " + d0Wind + " " + d0Rain);


                   console.log("day 0");
                   console.log(response.list[0]);
        
                   console.log("windspeed" + d0.speed);

                  
                   console.log(response.list[0].weather[0].description);



                })
              }
    </script>

</body>
</html>